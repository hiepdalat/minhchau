<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n L√Ω Nh·∫≠p H√†ng</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" xintegrity="sha512-Fo3rlrZj/k7s0/QzY/3j+0qFzNlB3tFf+9D+J+Q+A+B+G+C+D+E+F+G+H+I+J+K+L+M+N+O+P+Q+R+S+T+U+V+W+X+Y+Z" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- SweetAlert2 CDN -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
        /* CSS ri√™ng cho b·∫£ng "M·∫∑t h√†ng ƒë√£ nh·∫≠p t·ª´ ƒë·∫°i l√Ω" trong nhaphang.html */
        #receiptsTableWrapper { /* ID m·ªõi cho table-wrapper c·ªßa b·∫£ng n√†y */
            max-height: 400px; /* ƒê·∫∑t chi·ªÅu cao t·ªëi ƒëa cho khung b·∫£ng */
            overflow-y: auto;   /* Th√™m thanh cu·ªôn d·ªçc khi n·ªôi dung v∆∞·ª£t qu√° chi·ªÅu cao */
            border: 1px solid #4a5568; /* Vi·ªÅn cho khung cu·ªôn */
            border-radius: 8px;
            margin-bottom: 1rem;
            
        }

        #receiptsTableWrapper table th {
            position: sticky; /* Gi·ªØ ti√™u ƒë·ªÅ c·ªë ƒë·ªãnh khi cu·ªôn */
            top: 0;
            z-index: 1; /* ƒê·∫£m b·∫£o ti√™u ƒë·ªÅ n·∫±m tr√™n n·ªôi dung */
            background-color: #4a5568; /* Gi·ªØ m√†u n·ªÅn cho ti√™u ƒë·ªÅ khi cu·ªôn */
            overflow-y: auto;
          overflow-x: auto;
        }
        #inputTableWrapper,
        #saveReceiptBtn {
         /* display: none; */
        max-height: 300px;
          overflow-y: auto;
          overflow-x: auto;
          padding-right: 4px;
         }
        #inputScrollWrapper {
  /*display: none; /* ·∫®n m·∫∑c ƒë·ªãnh */
  max-height: 300px;
  overflow-y: auto;
  overflow-x: auto;
  padding-right: 4px;
}
        /* ƒê·∫£m b·∫£o c√°c style chung c·ªßa table v·∫´n ƒë∆∞·ª£c √°p d·ª•ng t·ª´ style.css */
        /* V√≠ d·ª•: table-layout: fixed; word-wrap: break-word; */
    </style>
</head>
<body class="congno-body">
    <div class="header-container">
        <div class="header-top">
            <h2>Nh·∫≠p H√†ng V√†o Kho</h2>
            <button class="btn-logout" onclick="logout()">üëâ ƒêƒÉng xu·∫•t</button>
        </div>
        <div id="dateTicker">
            <div id="tickerWrap"></div>
        </div>
    </div>

    <div class="container p-4">
        <!-- Input Section for New Receipt (Visible by default) -->
        <div class="card mb-4">
            <h3 class="text-lg font-bold mb-2">Th√¥ng tin phi·∫øu nh·∫≠p</h3>
            <div class="flex flex-wrap gap-2 items-end mb-4">
                <div class="flex-1 min-w-[120px]">
                    <label for="dailyName" class="block text-sm font-medium text-gray-300">T√™n ƒë·∫°i l√Ω:</label>
                    <input type="text" id="dailyName" class="w-full p-2 rounded-md bg-gray-700 border border-gray-600 text-white" placeholder="T√™n ƒë·∫°i l√Ω">
                
                    <label for="receiptDate" class="block text-sm font-medium text-gray-300">Ng√†y:</label>
                    <input type="date" id="receiptDate" class="w-full p-2 rounded-md bg-gray-700 border border-gray-600 text-white">
                </div>
            </div>

            <h3 class="text-lg font-bold mb-2">Th√™m m·∫∑t h√†ng</h3>
            <div class="flex flex-wrap gap-2 items-end mb-4">
                <div class="flex-1 min-w-[120px]">
                    <label for="itemName" class="block text-sm font-medium text-gray-300">T√™n h√†ng:</label>
                    <input type="text" id="itemName" class="w-full p-2 rounded-md bg-gray-700 border border-gray-600 text-white" placeholder="T√™n h√†ng">
               
                    <label for="itemUnit" class="block text-sm font-medium text-gray-300">ƒê∆°n v·ªã t√≠nh:</label>
                    <input type="text" id="itemUnit" class="w-full p-2 rounded-md bg-gray-700 border border-gray-600 text-white" placeholder="vd: c√°i, kg, h">
                
                    <label for="itemQuantity" class="block text-sm font-medium text-gray-300">S·ªë l∆∞·ª£ng:</label>
                    <input type="number" id="itemQuantity" class="w-full p-2 rounded-md bg-gray-700 border border-gray-600 text-white" value="1" min="1">
                
                    <label for="itemPrice" class="block text-sm font-medium text-gray-300">ƒê∆°n gi√°:</label>
                    <input type="number" id="itemPrice" class="w-full p-2 rounded-md bg-gray-700 border border-gray-600 text-white" value="0" min="0">
                
                    <label for="itemDiscount" class="block text-sm font-medium text-gray-300">Chi·∫øt kh·∫•u (%):</label>
                    <input type="number" id="itemDiscount" class="w-full p-2 rounded-md bg-gray-700 border border-gray-600 text-white" value="0" min="0" max="100">
                </div>
                <div class="flex items-end col-span-1 sm:col-span-2 lg:col-span-5">
                    <button id="addItemBtn" class="w-full py-2 px-4 rounded-md bg-green-600 hover:bg-green-700 transition-colors duration-200">
                      ‚ûï Th√™m m√≥n
                    </button>
                </div>
            </div>

            <!-- Table for Current Items in Receipt -->
           <div id="inputScrollWrapper" class="hidden">
            <div id="inputTableWrapper" class="table-wrapper mb-4">
              <table  class="min-w-full bg-gray-800 rounded-lg overflow-hidden">
                    <thead>
                        <tr>
                            <th class="py-2 px-4 bg-gray-700 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider">T√™n h√†ng</th>
                            <th class="py-2 px-4 bg-gray-700 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider">ƒêVT</th>
                            <th class="py-2 px-4 bg-gray-700 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider">SL</th>
                            <th class="py-2 px-4 bg-gray-700 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider">ƒê∆°n gi√°</th>
                            <th class="py-2 px-4 bg-gray-700 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider">CK(%)</th>
                            <th class="py-2 px-4 bg-gray-700 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider">G-Nh·∫≠p</th>
                            <th class="py-2 px-4 bg-gray-700 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider">Th√†nh ti·ªÅn</th>
                            <th class="py-2 px-4 bg-gray-700 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider">H√†nh ƒë·ªông</th>
                        </tr>
                    </thead>
                    <tbody id="currentItemsBody" class="divide-y divide-gray-700">
                        <!-- Items will be added here by JavaScript -->
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="6" class="py-2 px-4 text-right font-bold text-gray-300">T·ªïng ti·ªÅn:</td>
                            <td id="totalAmount" class="py-2 px-4 text-right font-bold text-green-400">0</td>
                            <td></td>
                        </tr>
                    </tfoot>
                </table>
            </div>
            <button id="saveReceiptBtn" class="w-full py-2 px-4 rounded-md bg-blue-600 hover:bg-blue-700 transition-colors duration-200">
               üíæ L∆∞u phi·∫øu nh·∫≠p
            </button>
        </div>
    </div>

        <!-- Search and Display Section (Hidden initially) -->
        <div id="receiptsSectionCard" class="card hidden">
            <h3 class="text-lg font-bold mb-2">M·∫∑t h√†ng ƒë√£ nh·∫≠p t·ª´ ƒë·∫°i l√Ω</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                <div>
                   <!--
                    <label for="searchDailyName" class="block text-sm font-medium text-gray-300">T√¨m theo t√™n ƒë·∫°i l√Ω:</label>
                    <input type="text" id="searchDailyName" class="w-full p-2 rounded-md bg-gray-700 border border-gray-600 text-white" placeholder="T√™n ƒë·∫°i l√Ω">
               -->
                    <!-- √î ch·ªçn ƒë·∫°i l√Ω (thay th·∫ø √¥ t√¨m tr∆∞·ªõc kia) -->
<select id="dailyNameSelect" class="w-full h-14 p-2 bg-gray-800 border border-gray-600 rounded text-white">
  <option value="">-- Ch·ªçn ƒë·∫°i l√Ω --</option>
</select>
                    <label for="searchMonth" class="block text-sm font-medium text-gray-300">Th√°ng:</label>
                    <input type="month" id="searchMonth" class="w-full p-2 rounded-md bg-gray-700 border border-gray-600 text-white">
                <button id="searchBtn" class="w-full py-2 px-4 rounded-md bg-purple-600 hover:bg-purple-700 transition-colors duration-200">
                        üîç T√¨m 
                    </button>
                </div>
                <div class="flex items-end space-x-2">
                    
                    <button id="viewDetailsBtn" class="w-full py-2 px-4 rounded-md bg-indigo-600 hover:bg-indigo-700 transition-colors duration-200" disabled>
                        <i class="fas fa-eye mr-2"></i> Xem chi ti·∫øt phi·∫øu nh·∫≠p
                    </button>
                    <button id="deleteSelectedBtn" class="w-full py-2 px-4 rounded-md bg-red-600 hover:bg-red-700 transition-colors duration-200">
                        üóëÔ∏è X√≥a ƒë√£ ch·ªçn
                    </button>
                </div>
            </div>
            
            <div id="receiptsTableWrapper" class="table-wrapper">
                <table id="receiptsTable" class="min-w-full bg-gray-800 rounded-lg overflow-hidden">
                  
                    <thead>
                        <tr>
                            <th class="py-2 px-4 bg-gray-700 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider"><input type="checkbox" id="selectAllReceipts"></th>
                            <th class="py-2 px-4 bg-gray-700 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider">Ng√†y</th>
                            <th class="py-2 px-4 bg-gray-700 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider">ƒê·∫°i l√Ω</th>
                            <th class="py-2 px-4 bg-gray-700 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider">T√™n h√†ng</th>
                            <th class="py-2 px-4 bg-gray-700 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider">ƒêVT</th>
                            <th class="py-2 px-4 bg-gray-700 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider">SL</th>
                            <th class="py-2 px-4 bg-gray-700 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider">ƒê∆°n gi√°</th>
                            <th class="py-2 px-4 bg-gray-700 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider">CK(%)</th>
                            <th class="py-2 px-4 bg-gray-700 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider">G-Nh·∫≠p</th>
                            <th class="py-2 px-4 bg-gray-700 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider">Th√†nh ti·ªÅn</th>
                            <th class="py-2 px-4 bg-gray-700 text-left text-xs font-semibold text-gray-300 uppercase tracking-wider">T·ªïng ti·ªÅn phi·∫øu</th>
                        </tr>
                    </thead>
                    <tbody id="receiptsBody" class="divide-y divide-gray-700">
                        <!-- Saved receipts items will be loaded here by JavaScript -->
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="10" class="py-2 px-4 text-right font-bold text-gray-300">T·ªïng ti·ªÅn t·∫•t c·∫£ m·∫∑t h√†ng hi·ªÉn th·ªã:</td>
                            <td id="grandTotalAllItems" class="py-2 px-4 text-right font-bold text-green-400">0</td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>
    </div>

    <!-- The custom messageBox is no longer needed as SweetAlert2 handles it -->
    <!-- <div id="messageBox" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
        <div class="bg-gray-800 p-6 rounded-lg shadow-lg text-white max-w-sm w-full text-center">
            <p id="messageText" class="mb-4 text-lg"></p>
            <button id="messageBoxCloseBtn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">ƒê√≥ng</button>
        </div>
    </div> -->

    <script src="script-nhap.js"></script>
</body>
</html>
